import{j as u}from"./jsx-runtime-vNq4Oc-g.js";import{f as ce}from"./index-KLTnsmU9.js";import{h as le,R as ie,g as de}from"./real-module-R3JuiRWs.js";import{a as pe}from"./import-1ezDrsEy.js";import{$ as fe}from"./import-wL4esqGM.js";import{r as o}from"./index-4g5l5LRQ.js";import{I as he}from"./input-RDt3y-7b.js";import{L as me}from"./label-Ikklv8R6.js";import{P as $e,a as xe,b as ve}from"./popover-M2p7GKcb.js";import{S as be}from"./spinner-TPfN3SXW.js";import{c as Ce}from"./utils-HR2XZNS3.js";import"./import-wQ4UPpae.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./extends-dGVwEr9R.js";import"./index-XGpeoBSN.js";import"./index-jmm5gWkb.js";import"./index-0dIgYeBD.js";import"./index-wUOvkR5E.js";import"./Combination-nC2vVd1Z.js";import"./index-cd2BOhhG.js";import"./index-vOJqYY-v.js";import"./index-EwzVq0z5.js";import"./index-zgrs-vd1.js";import"./index-TcKUnSVx.js";import"./index-_UegSYSw.js";function ye(e){return e&&e.__esModule?e.default:e}var P={},D={};D={"Clear search":"مسح البحث"};var B={};B={"Clear search":"Изчистване на търсене"};var R={};R={"Clear search":"Vymazat hledání"};var F={};F={"Clear search":"Ryd søgning"};var j={};j={"Clear search":"Suche zurücksetzen"};var k={};k={"Clear search":"Απαλοιφή αναζήτησης"};var L={};L={"Clear search":"Clear search"};var q={};q={"Clear search":"Borrar búsqueda"};var A={};A={"Clear search":"Tühjenda otsing"};var V={};V={"Clear search":"Tyhjennä haku"};var _={};_={"Clear search":"Effacer la recherche"};var N={};N={"Clear search":"נקה חיפוש"};var w={};w={"Clear search":"Obriši pretragu"};var I={};I={"Clear search":"Keresés törlése"};var O={};O={"Clear search":"Cancella ricerca"};var T={};T={"Clear search":"検索をクリア"};var z={};z={"Clear search":"검색 지우기"};var K={};K={"Clear search":"Išvalyti iešką"};var U={};U={"Clear search":"Notīrīt meklēšanu"};var M={};M={"Clear search":"Tøm søk"};var G={};G={"Clear search":"Zoekactie wissen"};var H={};H={"Clear search":"Wyczyść zawartość wyszukiwania"};var W={};W={"Clear search":"Limpar pesquisa"};var Z={};Z={"Clear search":"Limpar pesquisa"};var J={};J={"Clear search":"Ştergeţi căutarea"};var Q={};Q={"Clear search":"Очистить поиск"};var X={};X={"Clear search":"Vymazať vyhľadávanie"};var Y={};Y={"Clear search":"Počisti iskanje"};var ee={};ee={"Clear search":"Obriši pretragu"};var re={};re={"Clear search":"Rensa sökning"};var ae={};ae={"Clear search":"Aramayı temizle"};var te={};te={"Clear search":"Очистити пошук"};var se={};se={"Clear search":"清除搜索"};var ue={};ue={"Clear search":"清除搜尋條件"};P={"ar-AE":D,"bg-BG":B,"cs-CZ":R,"da-DK":F,"de-DE":j,"el-GR":k,"en-US":L,"es-ES":q,"et-EE":A,"fi-FI":V,"fr-FR":_,"he-IL":N,"hr-HR":w,"hu-HU":I,"it-IT":O,"ja-JP":T,"ko-KR":z,"lt-LT":K,"lv-LV":U,"nb-NO":M,"nl-NL":G,"pl-PL":H,"pt-BR":W,"pt-PT":Z,"ro-RO":J,"ru-RU":Q,"sk-SK":X,"sl-SI":Y,"sr-SP":ee,"sv-SE":re,"tr-TR":ae,"uk-UA":te,"zh-CN":se,"zh-TW":ue};function ge(e,r,s){let t=le(ye(P)),{isDisabled:n,isReadOnly:i,onSubmit:a=()=>{},onClear:c,type:p="search"}=e,m=h=>{const v=h.key;(v==="Enter"||v==="Escape")&&h.preventDefault(),!(n||i)&&(v==="Enter"&&a(r.value),v==="Escape"&&(r.setValue(""),c&&c()))},$=()=>{r.setValue(""),c&&c()},f=()=>{var h;(h=s.current)===null||h===void 0||h.focus()},{labelProps:l,inputProps:d,descriptionProps:C,errorMessageProps:oe,...ne}=pe({...e,value:r.value,onChange:r.setValue,onKeyDown:ie(m,e.onKeyDown),type:p},s);return{labelProps:l,inputProps:{...d,defaultValue:void 0},clearButtonProps:{"aria-label":t.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:n||i,onPress:$,onPressStart:f},descriptionProps:C,errorMessageProps:oe,...ne}}function Ee(e){let[r,s]=fe(y(e.value),y(e.defaultValue)||"",e.onChange);return{value:r,setValue:s}}function y(e){if(e!=null)return e.toString()}const Se=o.forwardRef(({className:e,onSelect:r,...s},t)=>u.jsx("li",{onClick:r,onKeyUp:r,onKeyDown:r,...s,ref:t,className:Ce("relative flex cursor-default select-none items-center gap-1 rounded-md px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 hover:bg-secondary hover:text-secondary-foreground focus:bg-secondary focus:text-secondary-foreground",e)})),x=o.forwardRef(({loading:e,empty:r,children:s,label:t,...n},i)=>{const{id:a}=n,c=Ee(n),p=de(i),{labelProps:m,inputProps:$}=ge({...n,"aria-label":t},c,p),[f,l]=o.useState(!1);o.useEffect(()=>{c.value&&l(!0)},[c.value]);const d=o.Children.count(s);return u.jsxs($e,{open:f,onOpenChange:l,children:[u.jsx(xe,{asChild:!0,children:u.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[t&&u.jsx(me,{...m,htmlFor:a,children:t}),u.jsx(he,{...$,ref:p})]})}),u.jsxs(ve,{onOpenAutoFocus:C=>C.preventDefault(),children:[e&&u.jsx("div",{className:"flex flex-col items-center",children:u.jsx(be,{isLoading:!0,className:"text-primary"})}),!e&&d===0&&r,!e&&u.jsx("ul",{children:s})]})]})});x.displayName="SearchField";try{x.displayName="SearchField",x.__docgenInfo={description:"",displayName:"SearchField",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},empty:{defaultValue:null,description:"",name:"empty",required:!1,type:{name:"ReactNode"}},rightComponent:{defaultValue:null,description:"",name:"rightComponent",required:!1,type:{name:"ReactNode"}},leftComponent:{defaultValue:null,description:"",name:"leftComponent",required:!1,type:{name:"ReactNode"}}}}}catch{}function Pe({minChars:e=0,delay:r=500,fetcher:s}){const t=o.useRef(),[n,i]=o.useState(!1),[a,c]=o.useState({value:"",prevent:!1}),[p,m]=o.useState([]),[$,f]=o.useState(!1);return o.useEffect(()=>{if(a.prevent)return;const{value:l}=a;typeof l>"u"||l.length<e||(t.current&&clearTimeout(t.current),f(!1),i(!0),t.current=setTimeout(async()=>{try{const d=await s(l);m(d)}catch{f(!0)}finally{i(!1)}},r))},[a]),{isEmpty:!p,isError:$,isLoading:n,query:a.value,results:p,search:(l,d)=>{c({value:l,prevent:d||!1})}}}const Xe={component:x,title:"Form/Search"};function De(){return Promise.resolve([...Array(5)].map((e,r)=>({id:r,value:ce.location.city()})))}const b={args:{label:"Search flights"},render:e=>{const{query:r,results:s,search:t,isLoading:n}=Pe({fetcher:De,delay:3e3,minChars:3}),i=a=>{t(a.value,!0)};return u.jsx(x,{...e,id:"search-flight",value:r,onChange:a=>t(a),loading:n,empty:"Please Enter 3 chars to start search",children:(s||[]).map(a=>u.jsx(Se,{onSelect:()=>i(a),children:a.value},a.id))})}};var g,E,S;b.parameters={...b.parameters,docs:{...(g=b.parameters)==null?void 0:g.docs,source:{originalSource:`{
  args: {
    label: \`Search flights\`
  },
  render: props => {
    const {
      query,
      results,
      search,
      isLoading
    } = useSearch<Item>({
      fetcher,
      delay: 3000,
      minChars: 3
    });
    const handleSelection = (el: Item) => {
      search(el.value, true);
    };
    return <SearchField {...props} id="search-flight" value={query} onChange={q => search(q)} loading={isLoading} empty="Please Enter 3 chars to start search">
        {(results || []).map(el => <SearchItem key={el.id} onSelect={() => handleSelection(el)}>
            {el.value}
          </SearchItem>)}
      </SearchField>;
  }
}`,...(S=(E=b.parameters)==null?void 0:E.docs)==null?void 0:S.source}}};const Ye=["Default"];export{b as Default,Ye as __namedExportsOrder,Xe as default};
