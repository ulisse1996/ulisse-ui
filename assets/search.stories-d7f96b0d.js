import{j as i,a as y}from"./jsx-runtime-29545a09.js";import{f as le}from"./index-3a83ac04.js";import{h as ie,R as de,g as pe}from"./real-module-ef20b043.js";import{a as fe}from"./import-0965c3d0.js";import{$ as he}from"./import-ff3a8ae5.js";import{r as u}from"./index-76fb7be0.js";import{I as me}from"./input-05212480.js";import{L as $e}from"./label-4f316bdd.js";import{P as ve,a as be,b as Ce}from"./popover-1d06fbbf.js";import{S as xe}from"./spinner-8a72c79d.js";import{c as ye}from"./utils-636fbba8.js";import"./import-b2195d95.js";import"./_commonjsHelpers-de833af9.js";import"./extends-98964cd2.js";import"./index-e2809c0a.js";import"./index-d3ea75b5.js";import"./index-7f80cad2.js";import"./index-90d601c3.js";import"./Combination-33a3cbce.js";import"./index-043160a2.js";import"./index-ef27adad.js";import"./index-57a346df.js";import"./index-b3fcadf7.js";import"./index-1f3e1a8a.js";import"./index-a011252c.js";function ge(e){return e&&e.__esModule?e.default:e}var D={},B={};B={"Clear search":"مسح البحث"};var R={};R={"Clear search":"Изчистване на търсене"};var F={};F={"Clear search":"Vymazat hledání"};var k={};k={"Clear search":"Ryd søgning"};var L={};L={"Clear search":"Suche zurücksetzen"};var q={};q={"Clear search":"Απαλοιφή αναζήτησης"};var A={};A={"Clear search":"Clear search"};var V={};V={"Clear search":"Borrar búsqueda"};var _={};_={"Clear search":"Tühjenda otsing"};var N={};N={"Clear search":"Tyhjennä haku"};var w={};w={"Clear search":"Effacer la recherche"};var I={};I={"Clear search":"נקה חיפוש"};var O={};O={"Clear search":"Obriši pretragu"};var T={};T={"Clear search":"Keresés törlése"};var z={};z={"Clear search":"Cancella ricerca"};var K={};K={"Clear search":"検索をクリア"};var j={};j={"Clear search":"검색 지우기"};var U={};U={"Clear search":"Išvalyti iešką"};var M={};M={"Clear search":"Notīrīt meklēšanu"};var G={};G={"Clear search":"Tøm søk"};var H={};H={"Clear search":"Zoekactie wissen"};var W={};W={"Clear search":"Wyczyść zawartość wyszukiwania"};var Z={};Z={"Clear search":"Limpar pesquisa"};var J={};J={"Clear search":"Limpar pesquisa"};var Q={};Q={"Clear search":"Ştergeţi căutarea"};var X={};X={"Clear search":"Очистить поиск"};var Y={};Y={"Clear search":"Vymazať vyhľadávanie"};var ee={};ee={"Clear search":"Počisti iskanje"};var re={};re={"Clear search":"Obriši pretragu"};var ae={};ae={"Clear search":"Rensa sökning"};var te={};te={"Clear search":"Aramayı temizle"};var se={};se={"Clear search":"Очистити пошук"};var ue={};ue={"Clear search":"清除搜索"};var oe={};oe={"Clear search":"清除搜尋條件"};D={"ar-AE":B,"bg-BG":R,"cs-CZ":F,"da-DK":k,"de-DE":L,"el-GR":q,"en-US":A,"es-ES":V,"et-EE":_,"fi-FI":N,"fr-FR":w,"he-IL":I,"hr-HR":O,"hu-HU":T,"it-IT":z,"ja-JP":K,"ko-KR":j,"lt-LT":U,"lv-LV":M,"nb-NO":G,"nl-NL":H,"pl-PL":W,"pt-BR":Z,"pt-PT":J,"ro-RO":Q,"ru-RU":X,"sk-SK":Y,"sl-SI":ee,"sr-SP":re,"sv-SE":ae,"tr-TR":te,"uk-UA":se,"zh-CN":ue,"zh-TW":oe};function Se(e,r,s){let t=ie(ge(D)),{isDisabled:o,isReadOnly:l,onSubmit:a=()=>{},onClear:n,type:p="search"}=e,m=h=>{const b=h.key;(b==="Enter"||b==="Escape")&&h.preventDefault(),!(o||l)&&(b==="Enter"&&a(r.value),b==="Escape"&&(r.setValue(""),n&&n()))},$=()=>{r.setValue(""),n&&n()},f=()=>{var h;(h=s.current)===null||h===void 0||h.focus()},{labelProps:c,inputProps:d,descriptionProps:x,errorMessageProps:ne,...ce}=fe({...e,value:r.value,onChange:r.setValue,onKeyDown:de(m,e.onKeyDown),type:p},s);return{labelProps:c,inputProps:{...d,defaultValue:void 0},clearButtonProps:{"aria-label":t.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:o||l,onPress:$,onPressStart:f},descriptionProps:x,errorMessageProps:ne,...ce}}function Ee(e){let[r,s]=he(g(e.value),g(e.defaultValue)||"",e.onChange);return{value:r,setValue:s}}function g(e){if(e!=null)return e.toString()}const Pe=u.forwardRef(({className:e,onSelect:r,...s},t)=>i("li",{onClick:r,onKeyUp:r,onKeyDown:r,...s,ref:t,className:ye("relative flex cursor-default select-none items-center gap-1 rounded-md px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 hover:bg-secondary hover:text-secondary-foreground focus:bg-secondary focus:text-secondary-foreground",e)})),v=u.forwardRef(({loading:e,empty:r,children:s,label:t,...o},l)=>{const{id:a}=o,n=Ee(o),p=pe(l),{labelProps:m,inputProps:$}=Se({...o,"aria-label":t},n,p),[f,c]=u.useState(!1);u.useEffect(()=>{n.value&&c(!0)},[n.value]);const d=u.Children.count(s);return y(ve,{open:f,onOpenChange:c,children:[i(be,{asChild:!0,children:y("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[t&&i($e,{...m,htmlFor:a,children:t}),i(me,{...$,ref:p})]})}),y(Ce,{onOpenAutoFocus:x=>x.preventDefault(),children:[e&&i("div",{className:"flex flex-col items-center",children:i(xe,{isLoading:!0,className:"text-primary"})}),!e&&d===0&&r,!e&&i("ul",{children:s})]})]})});v.displayName="SearchField";try{v.displayName="SearchField",v.__docgenInfo={description:"",displayName:"SearchField",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},empty:{defaultValue:null,description:"",name:"empty",required:!1,type:{name:"ReactNode"}},rightComponent:{defaultValue:null,description:"",name:"rightComponent",required:!1,type:{name:"ReactNode"}},leftComponent:{defaultValue:null,description:"",name:"leftComponent",required:!1,type:{name:"ReactNode"}}}}}catch{}function De({minChars:e=0,delay:r=500,fetcher:s}){const t=u.useRef(),[o,l]=u.useState(!1),[a,n]=u.useState({value:"",prevent:!1}),[p,m]=u.useState([]),[$,f]=u.useState(!1);return u.useEffect(()=>{if(a.prevent)return;const{value:c}=a;typeof c>"u"||c.length<e||(t.current&&clearTimeout(t.current),f(!1),l(!0),t.current=setTimeout(async()=>{try{const d=await s(c);m(d)}catch{f(!0)}finally{l(!1)}},r))},[a]),{isEmpty:!p,isError:$,isLoading:o,query:a.value,results:p,search:(c,d)=>{n({value:c,prevent:d||!1})}}}const Ye={component:v,title:"Form/Search"};function Be(){return Promise.resolve([...Array(5)].map((e,r)=>({id:r,value:le.location.city()})))}const C={args:{label:"Search flights"},render:e=>{const{query:r,results:s,search:t,isLoading:o}=De({fetcher:Be,delay:3e3,minChars:3}),l=a=>{t(a.value,!0)};return i(v,{...e,id:"search-flight",value:r,onChange:a=>t(a),loading:o,empty:"Please Enter 3 chars to start search",children:(s||[]).map(a=>i(Pe,{onSelect:()=>l(a),children:a.value},a.id))})}};var S,E,P;C.parameters={...C.parameters,docs:{...(S=C.parameters)==null?void 0:S.docs,source:{originalSource:`{
  args: {
    label: \`Search flights\`
  },
  render: props => {
    const {
      query,
      results,
      search,
      isLoading
    } = useSearch<Item>({
      fetcher,
      delay: 3000,
      minChars: 3
    });
    const handleSelection = (el: Item) => {
      search(el.value, true);
    };
    return <SearchField {...props} id="search-flight" value={query} onChange={q => search(q)} loading={isLoading} empty="Please Enter 3 chars to start search">
        {(results || []).map(el => <SearchItem key={el.id} onSelect={() => handleSelection(el)}>
            {el.value}
          </SearchItem>)}
      </SearchField>;
  }
}`,...(P=(E=C.parameters)==null?void 0:E.docs)==null?void 0:P.source}}};const er=["Default"];export{C as Default,er as __namedExportsOrder,Ye as default};
